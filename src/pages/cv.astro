---
// eslint-disable-next-line import/no-unresolved
import { getCollection } from "astro:content";
import Gig from "@/components/cv/Gig/Gig.astro";
import StandardPage from "@/layouts/StandardPage.astro";
import { Box } from "@/components/_base/Box/Box";

import { TwoColContainer } from "@/components/containers/TwoColContainer/TwoColContainer";

const gigs = await getCollection("gigs");
const allGigsByDate = gigs.sort((a, b) => {
  return (
    new Date(b.data.endDate).getTime() - new Date(a.data.endDate).getTime()
  );
});
---

<StandardPage title="Work by Rob Easthope">
  <TwoColContainer id="cv" heading="Experience">
    <Box as="ul" className="flex max-w-prose flex-col gap-1.5 print:gap-0.5">
      {allGigsByDate?.map((gig) => <Gig gig={gig} />)}
    </Box>
  </TwoColContainer>
</StandardPage>
