---
// eslint-disable-next-line import/no-unresolved
import { getCollection } from "astro:content";

import { Box } from "@/components/ui/Box/Box";
import { InternalLink } from "@/components/ui/InternalLink/InternalLink";
import { Type } from "@/components/ui/Type/Type";
import { Diamond } from "@/components/decoration/Diamond/Diamond";
import { TwoColContainer } from "@/components/containers/TwoColContainer/TwoColContainer";

const listedProjects = await getCollection("work");
const listedProjectsByDate = listedProjects.sort((a, b) => {
  return (
    new Date(b.data.endDate).getTime() - new Date(a.data.endDate).getTime()
  );
});
---

<TwoColContainer id="work" heading="Work">
  <Box
    as="ul"
    className="grid grid-cols-1 gap-x-1 gap-y-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-1 md:gap-x-2 md:gap-y-1 lg:grid-cols-2"
  >
    {
      listedProjectsByDate?.map((project) => (
        <Type as="li">
          <InternalLink
            href={project.data.url}
            className="flex h-full flex-col"
          >
            <Type as="div">{project.data.title}</Type>
            <Type as="div" className="text-sm italic">
              {project.data.description}
            </Type>
          </InternalLink>
        </Type>
      ))
    }
  </Box>
</TwoColContainer>
